import{P as de}from"./PageLayout-CNk6d9wY.js";import{o as ue,C as re,r as u,b as i,w as s,d as l,u as o,h as ie,e as _,f as g,t as A,j as n,p,m as f,F as O,z as X,B as ce,i as c}from"./app-CNC4IMbH.js";import z from"./ItemDialog-Ch3ZbpS4.js";import me from"./AvailabilityDialog-DoYNcKxs.js";import ve from"./DeleteItemDialog-C3tulsnX.js";import{_ as k}from"./ArchetypeDialog-DzghOjB7.js";import{a as b}from"./api-DLStZGrk.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./loading-CNBH5LN6.js";import"./response-mnBps1vM.js";const _e={style:{width:"100%"}},ge={class:"d-flex justify-space-between align-center mb-4"},ye={key:0,class:"mb-2"},fe={key:0},he={key:0,class:"mt-6"},be={key:1,class:"mt-6"},xe={class:"d-flex flex-wrap ga-2",style:{width:"100%"}},we={class:"d-flex justify-center mt-4"},Ve={key:2,class:"mt-6 text-center"},Ie={__name:"LibraryCatalog",setup(Ue){const m=ce().props.auth.user,S=c([]),D=c(0),d=c({archetype:null,category:null,usage:null,brand:null,search:null,user_id:null}),j=c(1),L=c(9),x=c(!1),C=c(!1),Y=()=>x.value=!x.value,N=c([]),W=c([]),H=c([]),T=c([]),Z=c([]),w=k.debounce(()=>{j.value=1,R()},300),R=async()=>{var M,y,B,P,V,h,I,U;const t={page:j.value,itemsPerPage:L.value,brand_id:(M=d.value.brand)==null?void 0:M.id,archetype_id:(B=(y=d.value)==null?void 0:y.archetype)==null?void 0:B.id,usage_id:(V=(P=d.value)==null?void 0:P.usage)==null?void 0:V.id,category_id:(I=(h=d.value)==null?void 0:h.category)==null?void 0:I.id,search:(U=d.value)==null?void 0:U.search};d.value.user_id&&(t.user_id=d.value.user_id),C.value=!!(t.brand_id||t.archetype_id||t.usage_id||t.category_id||t.search||t.user_id);const e=await b.get(route("items.index"),{params:t});S.value=e.data.data,D.value=e.data.total},F=async t=>{if(t){const e=await b.get(route("archetypes.index"),{params:{query:t}});N.value=e.data.data}},G=async t=>{const e=await b.get(route("brands.index"),{params:{query:t}});W.value=e.data.data},J=async t=>{const e=await b.get(route("categories.index"),{params:{query:t}});H.value=e.data.data},E=async t=>{const e=await b.get(route("usages.index"),{params:{query:t}});T.value=e.data.data},ee=k.debounce(F,300),ae=k.debounce(G,300),te=k.debounce(J,300),le=k.debounce(E,300);ue(async()=>{oe(),F(),re(()=>x.value,async t=>{t&&(G(),J(),E())})});const oe=async()=>{const t=await b.get(route("items.featured"));Z.value=t.data.data};return(t,e)=>{const M=u("v-btn"),y=u("v-autocomplete"),B=u("v-checkbox"),P=u("v-expand-transition"),V=u("v-img"),h=u("v-icon"),I=u("v-card-title"),U=u("v-card-subtitle"),$=u("v-card-actions"),Q=u("v-card"),q=u("v-col"),K=u("v-row"),se=u("v-pagination"),ne=u("v-container");return n(),i(de,null,{default:s(()=>[l(o(ie),{title:"Catalog"}),l(ne,{fluid:"",class:"d-flex align-center justify-center pa-4"},{default:s(()=>[_("div",_e,[_("div",ge,[e[6]||(e[6]=_("div",{class:"text-h5 font-weight-bold"},"Tools",-1)),_("div",null,[l(M,{size:"small",variant:"outlined",onClick:Y},{default:s(()=>[g(A(x.value?"Hide Advanced":"Advanced Search"),1)]),_:1}),o(m)?(n(),i(z,{key:0,aim:"create",class:"ml-2"})):p("",!0)])]),l(y,{modelValue:d.value.archetype,"onUpdate:modelValue":[e[0]||(e[0]=a=>d.value.archetype=a),o(w)],density:"compact",items:N.value,label:"Search","item-title":"name","item-value":"id","hide-no-data":"","hide-details":"","return-object":"",clearable:"","onUpdate:search":o(ee)},null,8,["modelValue","items","onUpdate:modelValue","onUpdate:search"]),l(P,null,{default:s(()=>{var a;return[x.value?(n(),f("div",ye,[o(m)?(n(),f("div",fe,[l(B,{modelValue:d.value.user_id,"onUpdate:modelValue":[e[1]||(e[1]=r=>d.value.user_id=r),o(w)],"true-value":(a=o(m))==null?void 0:a.id,"false-value":null,label:"Show only my tools","hide-details":"",density:"compact"},null,8,["modelValue","true-value","onUpdate:modelValue"])])):p("",!0),l(y,{modelValue:d.value.brand,"onUpdate:modelValue":[e[2]||(e[2]=r=>d.value.brand=r),o(w)],density:"compact",items:W.value,label:"Brand","item-title":"name","item-value":"id","hide-no-data":"","hide-details":"","return-object":"",clearable:"","onUpdate:search":o(ae)},null,8,["modelValue","items","onUpdate:modelValue","onUpdate:search"]),l(y,{modelValue:d.value.category,"onUpdate:modelValue":[e[3]||(e[3]=r=>d.value.category=r),o(w)],density:"compact",items:H.value,label:"Category","item-title":"name","item-value":"id","hide-no-data":"","hide-details":"","return-object":"",clearable:"","onUpdate:search":o(te)},null,8,["modelValue","items","onUpdate:modelValue","onUpdate:search"]),l(y,{modelValue:d.value.usage,"onUpdate:modelValue":[e[4]||(e[4]=r=>d.value.usage=r),o(w)],density:"compact",items:T.value,label:"Usage","item-title":"name","item-value":"id","hide-no-data":"","hide-details":"","return-object":"",clearable:"","onUpdate:search":o(le)},null,8,["modelValue","items","onUpdate:modelValue","onUpdate:search"])])):p("",!0)]}),_:1}),Z.value.length&&!C.value?(n(),f("div",he,[e[8]||(e[8]=_("div",{class:"text-h6 font-weight-bold mb-3"},"Featured Tools",-1)),l(K,null,{default:s(()=>[(n(!0),f(O,null,X(Z.value,a=>(n(),i(q,{key:a.id,cols:"12",sm:"6",md:"4"},{default:s(()=>[l(Q,{class:"pa-2",elevation:"2"},{default:s(()=>{var r;return[(r=a.images)!=null&&r.length?(n(),i(V,{key:0,src:a.images[0].url,height:"180",cover:"","lazy-src":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZTIeMmUyIi8+PC9zdmc+"},null,8,["src"])):(n(),i(h,{key:1,size:"80",class:"ma-4"},{default:s(()=>[...e[7]||(e[7]=[g("mdi-image-off",-1)])]),_:1})),l(I,{class:"text-subtitle-1"},{default:s(()=>{var v;return[g(A((v=a.archetype)==null?void 0:v.name),1)]}),_:2},1024),l(U,null,{default:s(()=>{var v;return[g(A((v=a.brand)==null?void 0:v.name),1)]}),_:2},1024),l($,null,{default:s(()=>[l(z,{item:a,aim:"view"},null,8,["item"])]),_:2},1024)]}),_:2},1024)]),_:2},1024))),128))]),_:1})])):p("",!0),C.value&&S.value.length?(n(),f("div",be,[e[10]||(e[10]=_("div",{class:"text-h6 font-weight-bold mb-3"},"Search Results",-1)),l(K,null,{default:s(()=>[(n(!0),f(O,null,X(S.value,a=>(n(),i(q,{key:a.id,cols:"12",sm:"6",md:"4"},{default:s(()=>[l(Q,{class:"pa-2",elevation:"2"},{default:s(()=>{var r;return[(r=a.images)!=null&&r.length?(n(),i(V,{key:0,src:a.images[0].url,height:"180",cover:"","lazy-src":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjE4MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZTIeMmUyIi8+PC9zdmc+"},null,8,["src"])):(n(),i(h,{key:1,size:"80",class:"ma-4"},{default:s(()=>[...e[9]||(e[9]=[g("mdi-image-off",-1)])]),_:1})),l(I,{class:"text-subtitle-1"},{default:s(()=>{var v;return[g(A((v=a.archetype)==null?void 0:v.name),1)]}),_:2},1024),l(U,null,{default:s(()=>{var v;return[g(A((v=a.brand)==null?void 0:v.name),1)]}),_:2},1024),l($,{class:"flex-wrap"},{default:s(()=>[_("div",xe,[o(m)&&a.owned_by===o(m).id?(n(),i(me,{key:0,item:a},null,8,["item"])):p("",!0),o(m)&&a.owned_by===o(m).id?(n(),i(z,{key:1,item:a,aim:"edit"},null,8,["item"])):p("",!0),!o(m)||a.owned_by!==o(m).id?(n(),i(z,{key:2,item:a,aim:"view"},null,8,["item"])):p("",!0),o(m)&&a.owned_by===o(m).id?(n(),i(ve,{key:3,item:a},null,8,["item"])):p("",!0)])]),_:2},1024)]}),_:2},1024)]),_:2},1024))),128))]),_:1}),_("div",we,[l(se,{modelValue:j.value,"onUpdate:modelValue":[e[5]||(e[5]=a=>j.value=a),R],length:Math.ceil(D.value/L.value),"total-visible":5},null,8,["modelValue","length"])])])):p("",!0),C.value&&!S.value.length?(n(),f("div",Ve,[l(h,{size:"64",color:"grey"},{default:s(()=>[...e[11]||(e[11]=[g("mdi-magnify",-1)])]),_:1}),e[12]||(e[12]=_("div",{class:"text-h6 mt-2"},"No tools found",-1))])):p("",!0)])]),_:1})]),_:1})}}},Le=pe(Ie,[["__scopeId","data-v-bd95e9e2"]]);export{Le as default};

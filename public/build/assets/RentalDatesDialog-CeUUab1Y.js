import{C as T,r as a,m as g,d as o,w as n,j as l,b as v,p as c,e as m,t as I,f as d,D as Z,E as W,i as y,A as w}from"./app-Cl7cSYny.js";import{a as H}from"./api-DuAdOD0e.js";import"./loading-B-pAuaq2.js";const O={class:"text-center"},G={class:"text-h6 mb-2"},J={key:0,class:"mb-4"},L={class:"text-h5 font-weight-bold"},U={key:2,class:"mb-4"},F={__name:"RentalDatesDialog",props:{item:{type:Object,required:!0}},setup(C){const u=W(!1),t=y(null),r=y(!1),_=y(""),R=C;T(u,s=>{s?b():B()});const V=async()=>{t.value={...R.item},r.value=!1,_.value="";try{const s=await H.get(route("item.is-rented",t.value.id));r.value=s.data.data===!0}catch(s){console.error("Error checking rental status:",s),r.value=!1}},b=async()=>{V()},B=()=>{r.value=!1,_.value=""},D=()=>{u.value=!1,w.post(route("rentals.store"),{item:t.value},{onSuccess:()=>{w.visit("/my-rentals")},onError:s=>{console.error("Error creating rental:",s),s.message&&(_.value=s.message)}})};return(s,e)=>{const p=a("v-btn"),M=a("v-img"),k=a("v-card"),x=a("v-alert"),j=a("v-icon"),A=a("v-chip"),E=a("v-card-text"),z=a("v-divider"),N=a("v-spacer"),P=a("v-card-actions"),S=a("v-dialog");return l(),g("div",O,[o(S,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=i=>u.value=i),"max-width":"500",onOpen:b},{activator:n(({props:i})=>[o(p,Z({color:"success",class:"text-none font-weight-regular","prepend-icon":"mdi-check-circle",text:"Rent this item",variant:"tonal",block:""},i),null,16)]),default:n(()=>[t.value?(l(),v(k,{key:0},{default:n(()=>{var i;return[(i=t.value.images)!=null&&i.length?(l(),v(M,{key:0,src:t.value.images[0].url,height:"200",cover:"","lazy-src":"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZTIeMmUyIi8+PC9zdmc+",class:"bg-grey-lighten-2"},null,8,["src"])):c("",!0),o(E,null,{default:n(()=>{var f,h;return[m("div",G,I(((f=t.value.archetype)==null?void 0:f.name)||"Item"),1),(h=t.value.access_value)!=null&&h.current_daily_rate?(l(),g("div",J,[o(k,{variant:"tonal",color:"info",class:"pa-3"},{default:n(()=>[e[3]||(e[3]=m("div",{class:"text-subtitle-2 mb-1"},"Rental Cost",-1)),m("div",L,[d(I(t.value.access_value.current_daily_rate)+" ",1),e[2]||(e[2]=m("span",{class:"text-body-2"},"credits / day",-1))])]),_:1})])):c("",!0),t.value.make_item_unavailable?(l(),v(x,{key:1,color:"warning",variant:"tonal",class:"mb-4",density:"compact"},{default:n(()=>[...e[4]||(e[4]=[d(" This item is currently marked as unavailable ",-1)])]),_:1})):c("",!0),!t.value.make_item_unavailable&&!r.value?(l(),g("div",U,[o(A,{color:"success",variant:"flat"},{default:n(()=>[o(j,{start:"",icon:"mdi-check"}),e[5]||(e[5]=d(" Available ",-1))]),_:1})])):c("",!0),r.value?(l(),v(x,{key:3,color:"error",variant:"tonal",class:"mb-4",density:"compact"},{default:n(()=>[...e[6]||(e[6]=[d(" This item is currently rented ",-1)])]),_:1})):c("",!0)]}),_:1}),o(z),o(P,null,{default:n(()=>[o(N),o(p,{text:"Cancel",variant:"plain",onClick:e[0]||(e[0]=f=>u.value=!1)}),!r.value&&!t.value.make_item_unavailable?(l(),v(p,{key:0,color:"success",text:"Confirm Rental",variant:"tonal",onClick:D})):c("",!0)]),_:1})]}),_:1})):c("",!0)]),_:1},8,["modelValue"])])}}};export{F as default};

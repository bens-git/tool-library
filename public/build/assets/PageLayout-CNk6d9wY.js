import{G as H,o as Q,C as U,r as d,j as i,m as L,d as r,w as n,u as e,b as c,n as g,f,e as x,t as V,p,F as S,z as R,A as m,D as W,B as X,i as B,K as Y,L as Z,J as h}from"./app-CNC4IMbH.js";import{u as ee}from"./loading-CNBH5LN6.js";import{u as te}from"./response-mnBps1vM.js";import{_ as oe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const re={class:"logo-text"},ne={key:0,class:"notification-dot"},ae={class:"drawer-btns drawer-header"},se={class:"logo-text"},ie={class:"drawer-btns"},le={class:"drawer-btns"},ue={class:"drawer-btns"},ce={__name:"PageMenus",setup(j){var D;const $=X(),{mobile:v}=H(),y=B(!1),b="Brant Region Tool Library",s=(D=$.props.auth)==null?void 0:D.user,l=$.props.notifications,k=B([]),C=t=>route.path===t;Q(async()=>{w()});const w=()=>{s?k.value=[{text:"My Loans",route:"my-loans"},{text:"My Rentals",route:"my-rentals"},{text:"Messages",route:"messages",icon:"mdi-message"},{text:"Community",route:"community",icon:"mdi-account-group"},{text:"Time Credits",route:"itc"},{text:"Vote on Rates",route:"credit-voting"},{text:"My Types",route:"archetype-list"},{text:"My Categories",route:"category-list"},{text:"My Usages",route:"usage-list"},{text:"My Brands",route:"brand-list"}]:k.value=[]};U(()=>s,()=>{w()},{deep:!0});const M=()=>{m.visit("/register")},P=()=>{m.visit("/login")},_=()=>{m.visit("/forgot-password")},q=()=>{m.visit("/logout-page")};return(t,a)=>{const A=d("v-app-bar-nav-icon"),z=d("v-icon"),u=d("v-btn"),F=d("v-spacer"),N=d("v-list-item"),E=d("v-list"),G=d("v-menu"),I=d("v-badge"),J=d("v-app-bar"),T=d("v-divider"),K=d("v-navigation-drawer");return i(),L(S,null,[r(J,{density:"compact"},{default:n(()=>[r(A,{onClick:a[0]||(a[0]=o=>y.value=!y.value)}),e(v)?p("",!0):(i(),c(u,{key:0,class:g({"v-btn--active":C("/landing-page")}),to:"/",text:""},{default:n(()=>[r(z,{size:"32",color:"primary"},{default:n(()=>[...a[7]||(a[7]=[f("mdi-hammer",-1)])]),_:1}),x("span",re,V(e(b)),1)]),_:1},8,["class"])),r(F),e(s)?(i(),c(G,{key:1},{activator:n(({props:o})=>[r(u,W({color:"primary"},o,{size:"small"}),{default:n(()=>[f(V(e(s).name)+" ",1),r(z,{right:""},{default:n(()=>[...a[8]||(a[8]=[f("mdi-menu-down",-1)])]),_:1})]),_:1},16)]),default:n(()=>[r(E,null,{default:n(()=>[r(N,null,{default:n(()=>[e(s)?(i(),c(u,{key:0,class:g({"v-btn--active":C("/logout-page")}),variant:"tonal",block:"",color:"error","prepend-icon":"mdi-logout",text:"Logout",onClick:q},null,8,["class"])):p("",!0)]),_:1}),(i(!0),L(S,null,R(k.value,o=>(i(),c(N,{key:o},{default:n(()=>[r(u,{class:g({"v-btn--active":t.route().current(o.route)}),color:t.route().current(o.route)?"primary":void 0,variant:t.route().current(o.route)?"flat":"text","prepend-icon":o.icon,text:o.text,block:"",onClick:O=>e(m).visit(o.route)},null,8,["class","color","variant","prepend-icon","text","onClick"])]),_:2},1024))),128))]),_:1})]),_:1})):p("",!0),e(v)?p("",!0):(i(),L(S,{key:2},[e(s)?p("",!0):(i(),c(u,{key:0,color:t.route().current("login")?"primary":void 0,variant:t.route().current("login")?"flat":"text","prepend-icon":"mdi-login",onClick:P},{default:n(()=>[...a[9]||(a[9]=[f("Login",-1)])]),_:1},8,["color","variant"])),e(s)?p("",!0):(i(),c(u,{key:1,color:t.route().current("register")?"primary":void 0,variant:t.route().current("register")?"flat":"text","prepend-icon":"mdi-account-plus",text:"Register",onClick:M},null,8,["color","variant"])),e(s)?p("",!0):(i(),c(u,{key:2,color:t.route().current("password.request")?"primary":void 0,variant:t.route().current("password.request")?"flat":"text","prepend-icon":"mdi-lock-reset",text:"Forgot Password",onClick:_},null,8,["color","variant"]))],64)),r(u,{class:g({"v-btn--active":t.route().current("library-catalog")}),color:t.route().current("library-catalog")?"primary":void 0,variant:t.route().current("library-catalog")?"flat":"text","prepend-icon":(e(v),"mdi-book"),text:e(v)?void 0:"Catalog",onClick:a[1]||(a[1]=o=>e(m).visit("library-catalog"))},null,8,["class","color","variant","prepend-icon","text"]),e(s)?(i(),c(u,{key:3,class:g({"v-btn--active":t.route().current("messages")}),color:t.route().current("messages")?"primary":void 0,variant:t.route().current("messages")?"flat":"text","prepend-icon":(e(v),"mdi-message"),text:e(v)?void 0:"Messages",onClick:a[2]||(a[2]=o=>e(m).visit("messages"))},{append:n(()=>{var o;return[((o=e(l))==null?void 0:o.unread_messages)>0?(i(),c(I,{key:0,content:e(l).unread_messages>99?"99+":e(l).unread_messages,color:"error","offset-x":"3","offset-y":"-2",style:{"margin-right":"-8px"}},null,8,["content"])):p("",!0)]}),_:1},8,["class","color","variant","prepend-icon","text"])):p("",!0),e(s)?(i(),c(u,{key:4,class:g({"v-btn--active":t.route().current("community")}),color:t.route().current("community")?"primary":void 0,variant:t.route().current("community")?"flat":"text","prepend-icon":(e(v),"mdi-account-group"),text:e(v)?void 0:"Community",onClick:a[3]||(a[3]=o=>e(m).visit("community"))},{append:n(()=>{var o;return[(o=e(l))!=null&&o.has_new_community_posts?(i(),L("span",ne)):p("",!0)]}),_:1},8,["class","color","variant","prepend-icon","text"])):p("",!0),r(F),r(F)]),_:1}),r(K,{modelValue:y.value,"onUpdate:modelValue":a[6]||(a[6]=o=>y.value=o),temporary:""},{default:n(()=>[r(T),x("div",ae,[r(u,{class:g({"v-btn--active":t.route().current("landing-page")}),color:t.route().current("landing-page")?"primary":void 0,variant:t.route().current("landing-page")?"flat":"text",block:"",onClick:a[4]||(a[4]=o=>e(m).visit("/"))},{default:n(()=>[r(z,{color:"primary"},{default:n(()=>[...a[10]||(a[10]=[f("mdi-hammer",-1)])]),_:1}),x("span",se,V(e(b)),1)]),_:1},8,["class","color","variant"])]),r(T),x("div",ie,[r(u,{class:g({"v-btn--active":t.route().current("library-catalog")}),color:t.route().current("library-catalog")?"primary":void 0,variant:t.route().current("library-catalog")?"flat":"text","prepend-icon":"mdi-book",text:"Catalog",onClick:a[5]||(a[5]=o=>e(m).visit("library-catalog"))},null,8,["class","color","variant"])]),r(T),x("div",le,[(i(!0),L(S,null,R(k.value,o=>(i(),c(u,{key:o,class:g({"v-btn--active":t.route().current(o.route)}),color:t.route().current(o.route)?"primary":void 0,variant:t.route().current(o.route)?"flat":"text","prepend-icon":o.icon,text:o.text,onClick:O=>e(m).visit(o.route)},null,8,["class","color","variant","prepend-icon","text","onClick"]))),128))]),r(T),x("div",ue,[e(s)?p("",!0):(i(),c(u,{key:0,color:t.route().current("login")?"primary":void 0,variant:t.route().current("login")?"flat":"text","prepend-icon":"mdi-login",text:"Login",onClick:P},null,8,["color","variant"])),e(s)?p("",!0):(i(),c(u,{key:1,color:t.route().current("register")?"primary":void 0,variant:t.route().current("register")?"flat":"text","prepend-icon":"mdi-account-plus",text:"Register",onClick:M},null,8,["color","variant"])),e(s)?p("",!0):(i(),c(u,{key:2,color:t.route().current("password.request")?"primary":void 0,variant:t.route().current("password.request")?"flat":"text","prepend-icon":"mdi-lock-reset",text:"Forgot Password",onClick:_},null,8,["color","variant"])),e(s)?(i(),c(u,{key:3,class:g({"v-btn--active":C("/logout-page")}),variant:"tonal",color:"error","prepend-icon":"mdi-logout",text:"Logout",onClick:q},null,8,["class"])):p("",!0)])]),_:1},8,["modelValue"])],64)}}},de={__name:"PageLayout",setup(j){const $=ee(),v=te(),y=B(!1),b=B(!1);return U(()=>v.response,s=>{Object.keys(s.errors||{}).length||!s.success&&s.message?y.value=!0:s.success&&(b.value=!0)},{deep:!0}),(s,l)=>{const k=d("v-progress-linear"),C=d("v-btn"),w=d("v-snackbar"),M=d("v-main"),P=d("v-app");return i(),c(P,null,{default:n(()=>[r(M,null,{default:n(()=>[r(ce),Y(r(k,{indeterminate:"",height:"3",style:{position:"fixed",top:"0","z-index":"9999"}},null,512),[[Z,e($).isLoading]]),h(s.$slots,"default",{},void 0,!0),r(w,{modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=_=>y.value=_),color:"error","multi-line":"",timeout:5e3},{actions:n(()=>[r(C,{variant:"text",onClick:l[0]||(l[0]=_=>y.value=!1)},{default:n(()=>[...l[4]||(l[4]=[f("Close",-1)])]),_:1})]),default:n(()=>[f(V(e(v).response.message)+" ",1)]),_:1},8,["modelValue"]),r(w,{modelValue:b.value,"onUpdate:modelValue":l[3]||(l[3]=_=>b.value=_),color:"success","multi-line":"",timeout:5e3},{actions:n(()=>[r(C,{variant:"text",onClick:l[2]||(l[2]=_=>b.value=!1)},{default:n(()=>[...l[5]||(l[5]=[f("Close",-1)])]),_:1})]),default:n(()=>[f(V(e(v).response.message)+" ",1)]),_:1},8,["modelValue"])]),_:3})]),_:3})}}},ye=oe(de,[["__scopeId","data-v-431b3faa"]]);export{ye as P};

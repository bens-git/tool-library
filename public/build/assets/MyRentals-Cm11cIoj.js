import{o as U,r as a,b as i,w as o,d as s,u as q,h as G,j as r,m as w,F as H,z as I,f as l,t as u,e as m,p as v,a as y,i as g}from"./app-CNC4IMbH.js";import{P as J}from"./PageLayout-CNk6d9wY.js";import"./loading-CNBH5LN6.js";import"./response-mnBps1vM.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const K={class:"mb-2"},Q={class:"text-caption text-grey"},W={key:0,class:"mb-3 pa-2 bg-grey-lighten-4 rounded"},X={class:"text-body-2"},Y={class:"text-caption text-grey"},at={__name:"MyRentals",setup(Z){const f=g([]),c=g(!1),k=g(null),R=n=>({booked:"blue",active:"green",completed:"grey",cancelled:"red",holding:"orange"})[n]||"grey",V=n=>n?new Date(n).toLocaleDateString():"",p=async()=>{try{const n=await y.get(route("me.rentals.index"));f.value=n.data.data||[]}catch(n){console.error(n)}},h=n=>{k.value=n,c.value=!0},D=async()=>{try{await y.delete(route("rentals.destroy",k.value)),c.value=!1,p()}catch(n){console.error(n)}},M=async n=>{try{await y.patch(route("rentals.update",n),{status:"active"}),p()}catch(t){console.error(t)}};return U(()=>{p()}),(n,t)=>{const N=a("v-list-item-title"),z=a("v-chip"),B=a("v-icon"),d=a("v-btn"),L=a("v-list-item-subtitle"),C=a("v-list-item"),A=a("v-list"),$=a("v-card-title"),j=a("v-card-text"),F=a("v-spacer"),O=a("v-card-actions"),P=a("v-card"),S=a("v-dialog"),T=a("v-col"),E=a("v-container");return r(),i(J,{title:"My Rentals"},{default:o(()=>[s(q(G),{title:"My Rentals"}),s(E,{class:"d-flex justify-center"},{default:o(()=>[s(T,{cols:"12",md:"8"},{default:o(()=>[s(A,{lines:"five"},{default:o(()=>[f.value.length?(r(!0),w(H,{key:0},I(f.value,e=>(r(),i(C,{key:e.id},{default:o(()=>[s(N,{class:"text-h6 mb-1"},{default:o(()=>{var _,x,b;return[l(u(((_=e.item)==null?void 0:_.name)||((b=(x=e.item)==null?void 0:x.archetype)==null?void 0:b.name)||"Loading..."),1)]}),_:2},1024),s(L,null,{default:o(()=>[m("div",K,[s(z,{color:R(e.status),size:"small",class:"mr-2"},{default:o(()=>[l(u(e.status),1)]),_:2},1032,["color"]),m("span",Q," Rented: "+u(V(e.rented_at)),1)]),e.owner?(r(),w("div",W,[t[2]||(t[2]=m("div",{class:"text-caption font-weight-bold"},"Owner",-1)),m("div",X,u(e.owner.name),1),m("div",Y,u(e.owner.email),1)])):v("",!0),e.conversation_id&&(e.status==="booked"||e.status==="active"||e.status==="holding")?(r(),i(d,{key:1,color:"primary",size:"small",class:"mt-2 mr-2",href:"/messages?conversation="+e.conversation_id},{default:o(()=>[s(B,{start:"",size:"small"},{default:o(()=>[...t[3]||(t[3]=[l("mdi-message",-1)])]),_:1}),t[4]||(t[4]=l(" Contact Owner ",-1))]),_:1},8,["href"])):v("",!0),e.status==="booked"?(r(),i(d,{key:2,color:"red",small:"",class:"mt-2",onClick:_=>h(e.id)},{default:o(()=>[...t[5]||(t[5]=[l(" Cancel Rental ",-1)])]),_:1},8,["onClick"])):v("",!0),e.status==="booked"?(r(),i(d,{key:3,color:"green",small:"",class:"mt-2 ml-2",onClick:_=>M(e.id)},{default:o(()=>[...t[6]||(t[6]=[l(" Mark as Active ",-1)])]),_:1},8,["onClick"])):v("",!0)]),_:2},1024)]),_:2},1024))),128)):(r(),i(C,{key:1},{default:o(()=>[...t[7]||(t[7]=[l("No rentals found.",-1)])]),_:1}))]),_:1}),s(S,{modelValue:c.value,"onUpdate:modelValue":t[1]||(t[1]=e=>c.value=e),"max-width":"400px"},{default:o(()=>[s(P,null,{default:o(()=>[s($,{class:"headline"},{default:o(()=>[...t[8]||(t[8]=[l("Confirm Cancellation",-1)])]),_:1}),s(j,null,{default:o(()=>[...t[9]||(t[9]=[l(" Are you sure you want to cancel this rental? ",-1)])]),_:1}),s(O,null,{default:o(()=>[s(F),s(d,{text:"",onClick:t[0]||(t[0]=e=>c.value=!1)},{default:o(()=>[...t[10]||(t[10]=[l("Cancel",-1)])]),_:1}),s(d,{color:"red",onClick:D},{default:o(()=>[...t[11]||(t[11]=[l("Confirm",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})}}};export{at as default};
